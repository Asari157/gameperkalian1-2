<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balon Perkalian - Game Edukatif</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');
        
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(180deg, #8ecae6 0%, #219ebc 100%);
            height: 100vh;
            user-select: none;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        
        .balloon {
            position: absolute;
            width: 80px;
            height: 100px;
            cursor: pointer;
            transition: transform 0.2s;
            animation-name: float;
            animation-duration: 15s;
            animation-timing-function: ease-in-out;
            animation-iteration-count: infinite;
            z-index: 10;
        }
        
        @keyframes float {
            0% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-20px) translateX(10px); }
            50% { transform: translateY(0) translateX(20px); }
            75% { transform: translateY(20px) translateX(10px); }
            100% { transform: translateY(0) translateX(0); }
        }
        
        .character {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 120px;
            z-index: 20;
            transition: transform 0.3s;
        }
        
        .bullet {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #ffb703;
            border-radius: 50%;
            z-index: 15;
            box-shadow: 0 0 10px rgba(255, 183, 3, 0.7);
        }
        
        .question-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 100;
            width: 80%;
            max-width: 500px;
            text-align: center;
            border: 8px solid #fb8500;
        }
        
        .answer-btn {
            background-color: #219ebc;
            color: white;
            border: none;
            border-radius: 15px;
            padding: 15px 25px;
            margin: 10px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #023047;
        }
        
        .answer-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 0 #023047;
        }
        
        .answer-btn:active {
            transform: translateY(0);
            box-shadow: 0 4px 0 #023047;
        }
        
        .star {
            position: absolute;
            font-size: 30px;
            animation: star-animation 1s forwards;
            z-index: 90;
        }
        
        @keyframes star-animation {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }
        
        .cloud {
            position: absolute;
            opacity: 0.8;
            z-index: 5;
        }
        
        .score-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px 20px;
            border-radius: 15px;
            font-size: 24px;
            font-weight: bold;
            color: #023047;
            z-index: 50;
            border: 3px solid #fb8500;
        }
        
        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #8ecae6 0%, #219ebc 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
        }
        
        .start-btn {
            background-color: #fb8500;
            color: white;
            border: none;
            border-radius: 15px;
            padding: 20px 40px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 6px 0 #d76f00;
            margin-top: 30px;
        }
        
        .start-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 11px 0 #d76f00;
        }
        
        .start-btn:active {
            transform: translateY(0);
            box-shadow: 0 6px 0 #d76f00;
        }
        
        .game-title {
            font-size: 48px;
            font-weight: 800;
            color: white;
            text-shadow: 3px 3px 0 #023047;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .game-subtitle {
            font-size: 24px;
            color: white;
            text-shadow: 1px 1px 0 #023047;
            margin-bottom: 40px;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .game-title {
                font-size: 36px;
            }
            
            .game-subtitle {
                font-size: 18px;
                padding: 0 20px;
            }
            
            .answer-btn {
                padding: 10px 15px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container" id="gameContainer">
        <!-- Clouds -->
        <div class="cloud" style="top: 10%; left: 10%; width: 150px;">
            <svg viewBox="0 0 100 60" fill="#ffffff">
                <path d="M0 40 Q10 30 20 40 Q30 20 40 30 Q50 10 60 30 Q70 20 80 30 Q90 20 100 40 Q100 50 90 55 Q80 60 70 55 Q60 60 50 55 Q40 60 30 55 Q20 60 10 55 Q0 50 0 40 Z" />
            </svg>
        </div>
        <div class="cloud" style="top: 20%; left: 70%; width: 120px;">
            <svg viewBox="0 0 100 60" fill="#ffffff">
                <path d="M0 40 Q10 30 20 40 Q30 20 40 30 Q50 10 60 30 Q70 20 80 30 Q90 20 100 40 Q100 50 90 55 Q80 60 70 55 Q60 60 50 55 Q40 60 30 55 Q20 60 10 55 Q0 50 0 40 Z" />
            </svg>
        </div>
        <div class="cloud" style="top: 40%; left: 30%; width: 180px;">
            <svg viewBox="0 0 100 60" fill="#ffffff">
                <path d="M0 40 Q10 30 20 40 Q30 20 40 30 Q50 10 60 30 Q70 20 80 30 Q90 20 100 40 Q100 50 90 55 Q80 60 70 55 Q60 60 50 55 Q40 60 30 55 Q20 60 10 55 Q0 50 0 40 Z" />
            </svg>
        </div>
        
        <!-- Character -->
        <div class="character" id="character">
            <svg viewBox="0 0 100 100" width="100%" height="100%">
                <!-- Body -->
                <circle cx="50" cy="50" r="40" fill="#FFB6C1" />
                
                <!-- Eyes -->
                <circle cx="35" cy="40" r="8" fill="white" />
                <circle cx="65" cy="40" r="8" fill="white" />
                <circle cx="35" cy="40" r="4" fill="#333" />
                <circle cx="65" cy="40" r="4" fill="#333" />
                
                <!-- Smile -->
                <path d="M30 60 Q50 75 70 60" fill="none" stroke="#333" stroke-width="3" stroke-linecap="round" />
                
                <!-- Ears -->
                <ellipse cx="20" cy="30" rx="10" ry="15" fill="#FFB6C1" />
                <ellipse cx="80" cy="30" rx="10" ry="15" fill="#FFB6C1" />
                <ellipse cx="20" cy="30" rx="6" ry="10" fill="#FFC0CB" />
                <ellipse cx="80" cy="30" rx="6" ry="10" fill="#FFC0CB" />
                
                <!-- Cannon -->
                <rect id="cannon" x="40" y="85" width="20" height="15" fill="#555" rx="2" />
            </svg>
        </div>
        
        <!-- Score Display -->
        <div class="score-display">
            Skor: <span id="scoreValue">0</span>
        </div>
        
        <!-- Start Screen -->
        <div class="start-screen" id="startScreen">
            <div class="game-title">Balon Perkalian</div>
            <div class="game-subtitle">Tembak balon dan jawab soal perkalian dengan benar!</div>
            <button class="start-btn" id="startButton">MULAI BERMAIN</button>
        </div>
    </div>

    <script>
        // Game state
        const gameState = {
            score: 0,
            isPlaying: false,
            currentQuestion: null,
            balloons: [],
            bullets: [],
            characterPosition: { x: window.innerWidth / 2, y: window.innerHeight - 70 },
            multiplicationTable: []
        };

        // DOM elements
        const gameContainer = document.getElementById('gameContainer');
        const character = document.getElementById('character');
        const scoreValue = document.getElementById('scoreValue');
        const startScreen = document.getElementById('startScreen');
        const startButton = document.getElementById('startButton');
        
        // Generate multiplication table (1x1 to 2x10)
        for (let i = 1; i <= 2; i++) {
            for (let j = 1; j <= 10; j++) {
                gameState.multiplicationTable.push({
                    x: i,
                    y: j,
                    result: i * j
                });
            }
        }

        // Shuffle the multiplication table
        gameState.multiplicationTable.sort(() => Math.random() - 0.5);

        // Start the game
        startButton.addEventListener('click', () => {
            startScreen.style.display = 'none';
            gameState.isPlaying = true;
            startGame();
        });

        // Start game function
        function startGame() {
            createBalloons();
            
            // Character movement with mouse
            gameContainer.addEventListener('mousemove', (e) => {
                if (!gameState.isPlaying) return;
                
                const containerRect = gameContainer.getBoundingClientRect();
                const mouseX = e.clientX - containerRect.left;
                
                // Limit character movement to container bounds
                const minX = 60;
                const maxX = containerRect.width - 60;
                const newX = Math.max(minX, Math.min(maxX, mouseX));
                
                character.style.left = `${newX}px`;
                gameState.characterPosition.x = newX;
            });
            
            // Shoot on click
            gameContainer.addEventListener('click', (e) => {
                if (!gameState.isPlaying) return;
                
                // Don't shoot if we're showing a question
                if (document.querySelector('.question-modal')) return;
                
                shootBullet();
            });
            
            // Game loop
            setInterval(updateGame, 16); // ~60fps
        }

        // Create balloons
        function createBalloons() {
            const colors = ['#FF5733', '#33FF57', '#3357FF', '#F3FF33', '#FF33F3', '#33FFF3'];
            
            for (let i = 0; i < 5; i++) {
                createBalloon(colors[i % colors.length]);
            }
        }

        function createBalloon(color) {
            const balloon = document.createElement('div');
            balloon.className = 'balloon';
            
            // Random position
            const x = Math.random() * (window.innerWidth - 100) + 50;
            const y = Math.random() * (window.innerHeight / 2) + 50;
            
            balloon.style.left = `${x}px`;
            balloon.style.top = `${y}px`;
            
            // Random animation duration and delay
            const duration = 10 + Math.random() * 10;
            const delay = Math.random() * 5;
            balloon.style.animationDuration = `${duration}s`;
            balloon.style.animationDelay = `-${delay}s`;
            
            // SVG balloon
            balloon.innerHTML = `
                <svg viewBox="0 0 50 100" width="100%" height="100%">
                    <path d="M25,10 
                           C40,10 45,25 45,40 
                           C45,60 35,75 25,75 
                           C15,75 5,60 5,40 
                           C5,25 10,10 25,10 Z" 
                          fill="${color}" />
                    <path d="M25,75 L25,95" stroke="#555" stroke-width="2" />
                    <path d="M20,95 L30,95" stroke="#555" stroke-width="2" />
                </svg>
            `;
            
            gameContainer.appendChild(balloon);
            
            // Store balloon data
            gameState.balloons.push({
                element: balloon,
                x: x,
                y: y,
                width: 80,
                height: 100
            });
        }

        // Shoot bullet
        function shootBullet() {
            const bullet = document.createElement('div');
            bullet.className = 'bullet';
            
            // Position bullet at character's cannon
            const bulletX = gameState.characterPosition.x - 10;
            const bulletY = window.innerHeight - 120;
            
            bullet.style.left = `${bulletX}px`;
            bullet.style.top = `${bulletY}px`;
            
            gameContainer.appendChild(bullet);
            
            // Store bullet data
            gameState.bullets.push({
                element: bullet,
                x: bulletX,
                y: bulletY,
                width: 20,
                height: 20,
                speed: 15
            });
        }

        // Update game state
        function updateGame() {
            if (!gameState.isPlaying) return;
            
            // Update bullets
            for (let i = gameState.bullets.length - 1; i >= 0; i--) {
                const bullet = gameState.bullets[i];
                
                // Move bullet up
                bullet.y -= bullet.speed;
                bullet.element.style.top = `${bullet.y}px`;
                
                // Remove bullet if it's off-screen
                if (bullet.y < -20) {
                    gameContainer.removeChild(bullet.element);
                    gameState.bullets.splice(i, 1);
                    continue;
                }
                
                // Check for collisions with balloons
                for (let j = gameState.balloons.length - 1; j >= 0; j--) {
                    const balloon = gameState.balloons[j];
                    
                    if (checkCollision(bullet, balloon)) {
                        // Remove bullet
                        gameContainer.removeChild(bullet.element);
                        gameState.bullets.splice(i, 1);
                        
                        // Remove balloon
                        gameContainer.removeChild(balloon.element);
                        gameState.balloons.splice(j, 1);
                        
                        // Show question
                        showQuestion();
                        
                        // Create new balloon after a delay
                        setTimeout(() => {
                            if (gameState.isPlaying) {
                                const colors = ['#FF5733', '#33FF57', '#3357FF', '#F3FF33', '#FF33F3', '#33FFF3'];
                                createBalloon(colors[Math.floor(Math.random() * colors.length)]);
                            }
                        }, 3000);
                        
                        break;
                    }
                }
            }
        }

        // Check collision between two objects
        function checkCollision(obj1, obj2) {
            return (
                obj1.x < obj2.x + obj2.width &&
                obj1.x + obj1.width > obj2.x &&
                obj1.y < obj2.y + obj2.height &&
                obj1.y + obj1.height > obj2.y
            );
        }

        // Show question
        function showQuestion() {
            if (gameState.multiplicationTable.length === 0) {
                // If we've gone through all questions, reset the table
                for (let i = 1; i <= 2; i++) {
                    for (let j = 1; j <= 10; j++) {
                        gameState.multiplicationTable.push({
                            x: i,
                            y: j,
                            result: i * j
                        });
                    }
                }
                gameState.multiplicationTable.sort(() => Math.random() - 0.5);
            }
            
            // Get a question
            const question = gameState.multiplicationTable.pop();
            gameState.currentQuestion = question;
            
            // Create answer options (1 correct, 2 wrong)
            const correctAnswer = question.result;
            let wrongAnswer1, wrongAnswer2;
            
            do {
                wrongAnswer1 = Math.floor(Math.random() * 20) + 1;
            } while (wrongAnswer1 === correctAnswer);
            
            do {
                wrongAnswer2 = Math.floor(Math.random() * 20) + 1;
            } while (wrongAnswer2 === correctAnswer || wrongAnswer2 === wrongAnswer1);
            
            const answers = [correctAnswer, wrongAnswer1, wrongAnswer2];
            answers.sort(() => Math.random() - 0.5);
            
            // Create modal
            const modal = document.createElement('div');
            modal.className = 'question-modal';
            modal.innerHTML = `
                <h2 class="text-4xl font-bold mb-6 text-blue-800">${question.x} × ${question.y} = ?</h2>
                <div class="flex flex-wrap justify-center">
                    ${answers.map(answer => `
                        <button class="answer-btn" data-answer="${answer}">${answer}</button>
                    `).join('')}
                </div>
            `;
            
            gameContainer.appendChild(modal);
            
            // Add event listeners to answer buttons
            const answerButtons = modal.querySelectorAll('.answer-btn');
            answerButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const selectedAnswer = parseInt(button.getAttribute('data-answer'));
                    checkAnswer(selectedAnswer, modal);
                });
            });
        }

        // Check answer
        function checkAnswer(answer, modal) {
            const isCorrect = answer === gameState.currentQuestion.result;
            
            if (isCorrect) {
                // Correct answer
                gameState.score += 10;
                scoreValue.textContent = gameState.score;
                
                // Show stars effect
                for (let i = 0; i < 10; i++) {
                    createStar(modal);
                }
                
                // Remove modal after a short delay
                setTimeout(() => {
                    gameContainer.removeChild(modal);
                }, 1000);
            } else {
                // Wrong answer
                modal.style.backgroundColor = '#ffcccc';
                
                // Highlight correct answer
                const buttons = modal.querySelectorAll('.answer-btn');
                buttons.forEach(button => {
                    const buttonAnswer = parseInt(button.getAttribute('data-answer'));
                    if (buttonAnswer === gameState.currentQuestion.result) {
                        button.style.backgroundColor = '#4CAF50';
                    }
                });
                
                // Remove modal after a delay
                setTimeout(() => {
                    gameContainer.removeChild(modal);
                }, 2000);
            }
        }

        // Create star effect
        function createStar(modal) {
            const star = document.createElement('div');
            star.className = 'star';
            star.textContent = '⭐';
            
            const modalRect = modal.getBoundingClientRect();
            const x = Math.random() * modalRect.width;
            const y = Math.random() * modalRect.height;
            
            star.style.left = `${modalRect.left + x}px`;
            star.style.top = `${modalRect.top + y}px`;
            
            gameContainer.appendChild(star);
            
            // Remove star after animation completes
            setTimeout(() => {
                gameContainer.removeChild(star);
            }, 1000);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            // Update character position
            gameState.characterPosition.y = window.innerHeight - 70;
            character.style.bottom = '20px';
            
            // Update balloons and bullets positions if needed
            // This is a simplified approach - in a more complex game, you might
            // want to recalculate positions based on percentages
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'964b31c4119afdca',t:'MTc1MzQ0MTY1NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
